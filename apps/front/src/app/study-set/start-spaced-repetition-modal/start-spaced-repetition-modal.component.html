<ng-template #modal>
  <div class="modal-body">
    <div class="d-flex justify-content-end">
      <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
        <span aria-hidden="true" class="visually-hidden">&times;</span>
      </button>
    </div>
    <div class="col">
      <div class="row text-center">
        <fa-icon [icon]="faCalendarDays" class="spaced-repetition-logo"></fa-icon>
        <div class="fs-3 mb-2">
          Start spaced repetition learning
          <a href="/handbook/usage/spaced-repetition" target="_blank" class="text-decoration-none help-button"><fa-icon [icon]="faQuestionCircle" class="fs-5"></fa-icon></a>
        </div>
        <div class="fs-6 text-secondary mb-3">Spaced repetition is learning technique that involves reviewing material at varying intervals. Newer and more difficult cards are shown more frequently, while cards that are easier to recall are shown less frequently.</div>
        <div class="fs-6 text-secondary mb-3">Before starting, ensure that your timezone is correctly set. If you have not already set your timezone, click <a [routerLink]="'/settings'" (click)="modalRef?.hide()">here</a> to do so.</div>
        <div class="fs-6 text-secondary">Your timezone is currently set to: <span class="fw-semibold">{{userTimezone}}</span></div>
      </div>
    </div>
    <hr>
    <form class="mt-3 px-md-1" (ngSubmit)="submit(form)" #form="ngForm" ngNativeValidate>
      <div class="mb-3">
        <label for="cardsPerDay" class="cardsPerDay">Cards Per Day</label>
        <input type="number" class="form-control w-25" name="cardsPerDay" id="cardsPerDay" [max]="set.cards.length" min="1" ngModel required>
        <div class="form-text">Enter the maximum number of cards you would like to study per day.</div>
      </div>
      <div class="mb-3">
        <label for="answerWith" class="answerWith">Answer With</label>
        <select id="answerWith" class="form-select w-50" name="answerWith" [(ngModel)]="answerWith" required>
          <option value="TERM">Term</option>
          <option value="DEFINITION">Definition</option>
        </select>
        <div class="form-text">Select which side of a flashcard you would like to answer with.</div>
        <div class="form-text text-danger" *ngIf="error">Something went wrong while updating the spaced repetition set.</div>
      </div>
      <div *ngIf="error" class="alert alert-danger" role="alert">
        There was an error with starting spaced repetition.
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary" [disabled]="clicked && !error">
          <span *ngIf="clicked && !error" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          Start
        </button>
      </div>
    </form>
  </div>
</ng-template>
